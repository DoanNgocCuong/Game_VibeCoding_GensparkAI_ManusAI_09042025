<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Value Management System</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f9fafb;
        }
        
        .progress-bar {
            height: 10px;
            background-color: #e2e8f0;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 5px;
            transition: width 0.3s ease;
        }
        
        .tag-pill {
            border-radius: 15px;
            padding: 2px 10px;
            font-size: 0.8rem;
            display: inline-block;
            margin-right: 5px;
            margin-bottom: 5px;
        }

        .task-animation {
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .level-up-animation {
            animation: pulse 1s;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); box-shadow: 0 0 10px rgba(79, 70, 229, 0.7); }
            100% { transform: scale(1); }
        }
        
        .badge {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .badge:hover {
            transform: scale(1.05);
        }
        
        .badge-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        .note-container {
            max-height: 100px;
            overflow-y: auto;
            transition: max-height 0.3s ease;
        }
        
        .note-container:focus-within {
            max-height: 200px;
        }
        
        .chart-container {
            height: 300px;
            position: relative;
        }

        #tagSelector {
            max-height: 150px;
            overflow-y: auto;
        }
        
        @media print {
            .no-print {
                display: none;
            }
            
            body {
                background-color: white;
            }
            
            .page-break {
                page-break-after: avoid;
                page-break-inside: avoid;
            }
            
            .chart-container {
                break-inside: avoid;
            }
        }

        .streak-flame {
            color: #f97316;
            animation: flame 1s infinite alternate;
        }

        @keyframes flame {
            from { text-shadow: 0 0 3px rgba(249, 115, 22, 0.7); }
            to { text-shadow: 0 0 10px rgba(249, 115, 22, 0.9); }
        }

        .xp-gain {
            animation: xpPop 0.5s;
        }

        @keyframes xpPop {
            0% { opacity: 0; transform: scale(0.8) translateY(10px); }
            50% { opacity: 1; transform: scale(1.1) translateY(-5px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #4b5563;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="mb-10 text-center">
            <h1 class="text-4xl font-extrabold text-indigo-700 mb-2">Task Value System</h1>
            <p class="text-gray-600">Transform your tasks into monetary value and track your progress</p>
        </header>

        <!-- Main content -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left column: Task input and user stats -->
            <div class="lg:col-span-1">
                <!-- Task input form -->
                <div class="bg-white p-6 rounded-xl shadow-md mb-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-plus-circle text-indigo-600 mr-2"></i>New Task
                    </h2>
                    
                    <form id="taskForm" class="space-y-4">
                        <div>
                            <label for="taskTitle" class="block text-sm font-medium text-gray-700 mb-1">Title</label>
                            <input type="text" id="taskTitle" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                        </div>
                        
                        <div>
                            <label for="taskValue" class="block text-sm font-medium text-gray-700 mb-1">Value (USD)</label>
                            <div class="relative rounded-md shadow-sm">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <span class="text-gray-500 sm:text-sm">$</span>
                                </div>
                                <input type="number" step="0.01" id="taskValue" class="w-full pl-7 pr-12 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                                <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                    <span class="text-gray-500 sm:text-sm">USD</span>
                                </div>
                            </div>
                            <p class="mt-1 text-sm text-gray-500">Positive value for income, negative for expenses</p>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Tags</label>
                            <div class="relative">
                                <input type="text" id="tagInput" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Add a tag...">
                                <div id="tagSelector" class="absolute z-10 w-full mt-1 bg-white shadow-lg rounded-md border border-gray-200 hidden">
                                    <!-- Tags will be generated here -->
                                </div>
                            </div>
                            <div id="selectedTags" class="mt-2 flex flex-wrap gap-2">
                                <!-- Selected tags will be displayed here -->
                            </div>
                        </div>
                        
                        <div>
                            <label for="taskNote" class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
                            <textarea id="taskNote" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
                        </div>
                        
                        <div>
                            <label for="taskDate" class="block text-sm font-medium text-gray-700 mb-1">Date</label>
                            <input type="date" id="taskDate" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                        </div>
                        
                        <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-md transition duration-300 flex items-center justify-center">
                            <i class="fas fa-save mr-2"></i>Save Task
                        </button>
                    </form>
                </div>
                
                <!-- User stats summary -->
                <div class="bg-white p-6 rounded-xl shadow-md">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-chart-line text-indigo-600 mr-2"></i>General Statistics
                    </h2>
                    
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-green-50 p-3 rounded-lg">
                            <p class="text-xs text-green-700 font-medium">Total Income</p>
                            <p id="totalIncome" class="text-2xl font-bold text-green-600">$0.00</p>
                        </div>
                        
                        <div class="bg-red-50 p-3 rounded-lg">
                            <p class="text-xs text-red-700 font-medium">Total Expenses</p>
                            <p id="totalExpense" class="text-2xl font-bold text-red-600">$0.00</p>
                        </div>
                    </div>
                    
                    <div class="bg-indigo-50 p-4 rounded-lg mb-6">
                        <div class="flex justify-between items-center">
                            <p class="text-sm text-indigo-700 font-medium">Net Balance</p>
                            <p id="netBalance" class="text-xl font-bold text-indigo-600">$0.00</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center justify-center space-x-2 mb-2">
                        <div class="streak-container flex items-center bg-orange-50 px-3 py-2 rounded-md">
                            <i class="fas fa-fire streak-flame mr-2"></i>
                            <div>
                                <p class="text-xs text-orange-700">Current streak</p>
                                <p id="currentStreak" class="font-bold text-orange-600">0 days</p>
                            </div>
                        </div>
                        
                        <div class="streak-container flex items-center bg-purple-50 px-3 py-2 rounded-md">
                            <i class="fas fa-trophy text-purple-600 mr-2"></i>
                            <div>
                                <p class="text-xs text-purple-700">Best streak</p>
                                <p id="bestStreak" class="font-bold text-purple-600">0 days</p>
                            </div>
                        </div>
                    </div>
                    
                    <div id="achievementContainer" class="flex flex-wrap justify-center gap-2 mt-4">
                        <!-- Achievements will be generated here -->
                    </div>
                </div>
            </div>
            
            <!-- Middle and right columns: Tag levels, task list, and charts -->
            <div class="lg:col-span-2">
                <!-- Tag levels -->
                <div class="bg-white p-6 rounded-xl shadow-md mb-8">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold text-gray-800 flex items-center">
                            <i class="fas fa-tags text-indigo-600 mr-2"></i>Tag Levels
                        </h2>
                        <select id="tagFilter" class="px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500">
                            <option value="all">All tags</option>
                            <option value="level">By level</option>
                            <option value="xp">By XP</option>
                            <option value="tasks">By task count</option>
                        </select>
                    </div>
                    
                    <div id="tagLevels" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Tag levels will be generated here -->
                    </div>
                </div>
                
                <!-- Today's tasks -->
                <div class="bg-white p-6 rounded-xl shadow-md mb-8">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold text-gray-800 flex items-center">
                            <i class="fas fa-list-check text-indigo-600 mr-2"></i>Task List
                        </h2>
                        <div class="flex items-center space-x-2">
                            <button id="prevDayBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-1 px-2 rounded-md transition duration-300">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <span id="currentDateDisplay" class="text-gray-700 font-medium">Today</span>
                            <button id="nextDayBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-1 px-2 rounded-md transition duration-300">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                            <button id="todayBtn" class="bg-indigo-100 hover:bg-indigo-200 text-indigo-700 font-medium py-1 px-3 rounded-md transition duration-300">
                                Today
                            </button>
                        </div>
                    </div>
                    
                    <div class="bg-gray-50 p-4 rounded-lg mb-4 flex justify-between items-center">
                        <div>
                            <span class="text-sm text-gray-500">Daily total:</span>
                            <span id="dailyTotal" class="ml-2 text-lg font-bold text-gray-800">$0.00</span>
                        </div>
                        <div>
                            <span class="text-sm text-gray-500">Task count:</span>
                            <span id="taskCount" class="ml-2 font-medium text-gray-800">0</span>
                        </div>
                    </div>
                    
                    <div id="taskList" class="space-y-3 max-h-80 overflow-y-auto">
                        <!-- Tasks will be generated here -->
                    </div>
                    
                    <div id="emptyState" class="text-center py-8 hidden">
                        <i class="fas fa-tasks text-gray-400 text-3xl mb-3"></i>
                        <p class="text-gray-500">No tasks for this day. Add a new task to get started!</p>
                    </div>
                </div>
                
                <!-- Charts -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-xl shadow-md">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            <i class="fas fa-chart-column text-indigo-600 mr-2"></i>Daily Income
                        </h2>
                        <div class="chart-container">
                            <canvas id="dailyIncomeChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="bg-white p-6 rounded-xl shadow-md">
                        <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                            <i class="fas fa-chart-pie text-indigo-600 mr-2"></i>Tag Distribution
                        </h2>
                        <div class="chart-container">
                            <canvas id="tagDistributionChart"></canvas>
                        </div>
                    </div>
                </div>
                
                <!-- XP Progression Chart -->
                <div class="bg-white p-6 rounded-xl shadow-md mt-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <i class="fas fa-arrow-trend-up text-indigo-600 mr-2"></i>XP Progression
                    </h2>
                    <div class="chart-container">
                        <canvas id="xpProgressionChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Challenges section -->
        <div class="bg-white p-6 rounded-xl shadow-md mt-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-medal text-indigo-600 mr-2"></i>Challenges and Achievements
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4" id="challengesContainer">
                <!-- Challenges will be generated here -->
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="mt-16 text-center text-gray-500 text-sm">
            <p>Task Value System &copy; 2023 - All data is stored locally in your browser</p>
        </footer>
    </div>
    
    <!-- Notification system -->
    <div id="notificationContainer" class="fixed bottom-4 right-4 z-50 space-y-2"></div>
    
    <!-- Level up modal -->
    <div id="levelUpModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-8 rounded-xl shadow-xl max-w-md w-full">
            <div class="text-center">
                <i class="fas fa-arrow-up text-4xl text-indigo-600 mb-4"></i>
                <h2 class="text-2xl font-bold text-gray-800 mb-2">Level Up!</h2>
                <p id="levelUpMessage" class="text-gray-600 mb-6">You have reached level 2 in the "Work" tag!</p>
                
                <div class="level-rewards bg-indigo-50 p-4 rounded-lg mb-6">
                    <h3 class="font-bold text-indigo-700 mb-2">Rewards</h3>
                    <ul class="text-left text-sm text-gray-700 space-y-1 pl-5 list-disc">
                        <li>10% XP bonus on next tasks</li>
                        <li>New badge unlocked</li>
                    </ul>
                </div>
                
                <button id="closeLevelUpModal" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-md transition duration-300">
                    Continue
                </button>
            </div>
        </div>
    </div>

    <script>
        // Data structure
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        let tags = JSON.parse(localStorage.getItem('tags')) || {};
        let achievements = JSON.parse(localStorage.getItem('achievements')) || {};
        let stats = JSON.parse(localStorage.getItem('stats')) || {
            streakDays: 0,
            bestStreak: 0,
            lastActiveDate: null
        };
        
        let currentDate = new Date();
        currentDate.setHours(0, 0, 0, 0);
        
        // Constants for game mechanics
        const XP_PER_USD = 10; // 10 XP per $1
        const LEVEL_XP_BASE = 100; // Base XP required for level 1
        const LEVEL_XP_MULTIPLIER = 1.5; // Each level requires 1.5x more XP
        
        // Charts
        let dailyIncomeChart = null;
        let tagDistributionChart = null;
        let xpProgressionChart = null;
        
        // Challenges definition
        const challenges = [
            {
                id: 'first_task',
                name: 'First Step',
                description: 'Add your first task',
                icon: 'fas fa-flag-checkered',
                color: '#4ade80',
                condition: () => tasks.length >= 1
            },
            {
                id: 'money_maker_100',
                name: 'Little Winner',
                description: 'Earn a total of $100',
                icon: 'fas fa-dollar-sign',
                color: '#10b981',
                condition: () => {
                    return tasks.filter(task => task.value > 0).reduce((sum, task) => sum + task.value, 0) >= 100;
                }
            },
            {
                id: 'money_maker_1000',
                name: 'Entrepreneur',
                description: 'Earn a total of $1,000',
                icon: 'fas fa-briefcase',
                color: '#059669',
                condition: () => {
                    return tasks.filter(task => task.value > 0).reduce((sum, task) => sum + task.value, 0) >= 1000;
                }
            },
            {
                id: 'task_streak_7',
                name: 'Regularity',
                description: 'Add tasks 7 days in a row',
                icon: 'fas fa-calendar-check',
                color: '#7c3aed',
                condition: () => stats.streakDays >= 7
            },
            {
                id: 'multi_tag_master',
                name: 'Multi-tasks',
                description: 'Create 5 different tags',
                icon: 'fas fa-tags',
                color: '#8b5cf6',
                condition: () => Object.keys(tags).length >= 5
            },
            {
                id: 'level_5_tag',
                name: 'Specialist',
                description: 'Reach level 5 in a tag',
                icon: 'fas fa-award',
                color: '#f59e0b',
                condition: () => {
                    return Object.values(tags).some(tag => tag.level >= 5);
                }
            }
        ];
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });
        
        function initializeApp() {
            // Set default date for the form
            document.getElementById('taskDate').valueAsDate = new Date();
            
            // Update streak
            updateStreak();
            
            // Initialize UI
            setCurrentDateDisplay();
            setupEventListeners();
            renderTaskList();
            updateTagLevels();
            updateCharts();
            updateDashboard();
            renderChallenges();
            renderAchievements();
        }
        
        function setupEventListeners() {
            // Task form submission
            document.getElementById('taskForm').addEventListener('submit', function(e) {
                e.preventDefault();
                addTask();
            });
            
            // Tag input and selection
            const tagInput = document.getElementById('tagInput');
            const tagSelector = document.getElementById('tagSelector');
            
            tagInput.addEventListener('focus', function() {
                updateTagSelector();
                tagSelector.classList.remove('hidden');
            });
            
            tagInput.addEventListener('input', function() {
                updateTagSelector(this.value);
            });
            
            document.addEventListener('click', function(e) {
                if (!tagInput.contains(e.target) && !tagSelector.contains(e.target)) {
                    tagSelector.classList.add('hidden');
                }
            });
            
            // Date navigation
            document.getElementById('prevDayBtn').addEventListener('click', () => navigateDate(-1));
            document.getElementById('nextDayBtn').addEventListener('click', () => navigateDate(1));
            document.getElementById('todayBtn').addEventListener('click', () => {
                currentDate = new Date();
                currentDate.setHours(0, 0, 0, 0);
                setCurrentDateDisplay();
                renderTaskList();
            });
            
            // Tag filter
            document.getElementById('tagFilter').addEventListener('change', function() {
                updateTagLevels(this.value);
            });
            
            // Level up modal
            document.getElementById('closeLevelUpModal').addEventListener('click', function() {
                document.getElementById('levelUpModal').classList.add('hidden');
            });
        }
        
        function addTask() {
            const title = document.getElementById('taskTitle').value.trim();
            const value = parseFloat(document.getElementById('taskValue').value);
            const selectedTags = Array.from(document.getElementById('selectedTags').children)
                .map(el => el.getAttribute('data-tag'));
            const note = document.getElementById('taskNote').value.trim();
            const taskDate = new Date(document.getElementById('taskDate').value);
            taskDate.setHours(0, 0, 0, 0);
            
            if (!title || isNaN(value) || selectedTags.length === 0) {
                showNotification('Please fill out all required fields', 'error');
                return;
            }
            
            const newTask = {
                id: Date.now(),
                title,
                value,
                tags: selectedTags,
                note,
                date: taskDate.toISOString(),
                timestamp: Date.now()
            };
            
            tasks.push(newTask);
            
            // Add XP for each tag
            const xpGained = Math.abs(value) * XP_PER_USD;
            selectedTags.forEach(tag => {
                addTagXP(tag, xpGained);
            });
            
            // Update streak
            updateStreak();
            
            // Save to localStorage
            saveData();
            
            // Reset form
            document.getElementById('taskForm').reset();
            document.getElementById('taskDate').valueAsDate = new Date();
            document.getElementById('selectedTags').innerHTML = '';
            
            // Update UI
            renderTaskList();
            updateTagLevels();
            updateCharts();
            updateDashboard();
            renderChallenges();
            
            showNotification(`Task added: ${title}`, 'success');
        }
        
        function addTagXP(tagName, xp) {
            // Initialize tag if it doesn't exist
            if (!tags[tagName]) {
                tags[tagName] = {
                    xp: 0,
                    level: 0,
                    color: getRandomColor(),
                    taskCount: 0,
                    history: []
                };
            }
            
            const oldLevel = tags[tagName].level;
            
            // Add XP and update task count
            tags[tagName].xp += xp;
            tags[tagName].taskCount = (tags[tagName].taskCount || 0) + 1;
            
            // Add to history
            tags[tagName].history = tags[tagName].history || [];
            tags[tagName].history.push({
                date: new Date().toISOString(),
                xp: xp
            });
            
            // Keep history limited to last 30 entries
            if (tags[tagName].history.length > 30) {
                tags[tagName].history.shift();
            }
            
            // Calculate new level
            const newLevel = calculateLevel(tags[tagName].xp);
            tags[tagName].level = newLevel;
            
            // Show level up notification if leveled up
            if (newLevel > oldLevel) {
                showLevelUpModal(tagName, newLevel);
            }
        }
        
        function showLevelUpModal(tagName, level) {
            const modal = document.getElementById('levelUpModal');
            const message = document.getElementById('levelUpMessage');
            
            message.textContent = `You have reached level ${level} in the "${tagName}" tag!`;
            
            modal.classList.remove('hidden');
        }
        
        function calculateLevel(xp) {
            let level = 0;
            let requiredXP = LEVEL_XP_BASE;
            let remainingXP = xp;
            
            while (remainingXP >= requiredXP) {
                level++;
                remainingXP -= requiredXP;
                requiredXP = Math.floor(LEVEL_XP_BASE * Math.pow(LEVEL_XP_MULTIPLIER, level));
            }
            
            return level;
        }
        
        function calculateXPForNextLevel(currentLevel) {
            return Math.floor(LEVEL_XP_BASE * Math.pow(LEVEL_XP_MULTIPLIER, currentLevel));
        }
        
        function calculateXPProgress(xp) {
            let level = 0;
            let totalXP = xp;
            let requiredXP = LEVEL_XP_BASE;
            
            while (totalXP >= requiredXP) {
                level++;
                totalXP -= requiredXP;
                requiredXP = Math.floor(LEVEL_XP_BASE * Math.pow(LEVEL_XP_MULTIPLIER, level));
            }
            
            return {
                currentXP: totalXP,
                requiredXP: requiredXP,
                percentage: (totalXP / requiredXP) * 100
            };
        }
        
        function deleteTask(taskId) {
            const taskIndex = tasks.findIndex(task => task.id === taskId);
            
            if (taskIndex !== -1) {
                tasks.splice(taskIndex, 1);
                saveData();
                
                renderTaskList();
                updateTagLevels();
                updateCharts();
                updateDashboard();
                renderChallenges();
                
                showNotification('Task deleted', 'info');
            }
        }
        
        function updateTagSelector(filter = '') {
            const tagSelector = document.getElementById('tagSelector');
            tagSelector.innerHTML = '';
            
            const tagNames = Object.keys(tags);
            const filteredTags = filter ? 
                tagNames.filter(tag => tag.toLowerCase().includes(filter.toLowerCase())) : 
                tagNames;
            
            // Add "Create new tag" option if filter is not empty
            if (filter && !tagNames.includes(filter)) {
                const newTagOption = document.createElement('div');
                newTagOption.className = 'px-3 py-2 hover:bg-indigo-50 cursor-pointer text-indigo-600 font-medium';
                newTagOption.innerHTML = `<i class="fas fa-plus-circle mr-2"></i>Create "${filter}"`;
                
                newTagOption.addEventListener('click', function() {
                    addTag(filter);
                    document.getElementById('tagInput').value = '';
                });
                
                tagSelector.appendChild(newTagOption);
            }
            
            // Add existing tags
            filteredTags.forEach(tag => {
                const tagOption = document.createElement('div');
                tagOption.className = 'px-3 py-2 hover:bg-gray-50 cursor-pointer';
                tagOption.innerHTML = `
                    <span class="inline-block w-3 h-3 rounded-full mr-2" style="background-color: ${tags[tag].color}"></span>
                    ${tag} <span class="text-gray-500 text-xs">(Level ${tags[tag].level})</span>
                `;
                
                tagOption.addEventListener('click', function() {
                    selectTag(tag);
                    document.getElementById('tagInput').value = '';
                });
                
                tagSelector.appendChild(tagOption);
            });
            
            if (filteredTags.length === 0 && !filter) {
                const emptyState = document.createElement('div');
                emptyState.className = 'px-3 py-2 text-gray-500 text-center';
                emptyState.textContent = 'No existing tags. Create a new one!';
                tagSelector.appendChild(emptyState);
            }
        }
        
        function addTag(tagName) {
            // Check if already selected
            const selectedTagsContainer = document.getElementById('selectedTags');
            const existingTag = Array.from(selectedTagsContainer.children)
                .find(el => el.getAttribute('data-tag') === tagName);
            
            if (existingTag) {
                return; // Tag already selected
            }
            
            // Initialize tag in tags object if it doesn't exist
            if (!tags[tagName]) {
                tags[tagName] = {
                    xp: 0,
                    level: 0,
                    color: getRandomColor(),
                    taskCount: 0,
                    history: []
                };
                saveData();
            }
            
            // Create and add tag pill
            const tagPill = document.createElement('div');
            tagPill.className = 'tag-pill inline-flex items-center';
            tagPill.setAttribute('data-tag', tagName);
            tagPill.style.backgroundColor = tags[tagName].color + '33';
            tagPill.style.color = tags[tagName].color;
            
            tagPill.innerHTML = `
                ${tagName}
                <button class="ml-1 text-xs hover:text-red-500" type="button">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            tagPill.querySelector('button').addEventListener('click', function() {
                tagPill.remove();
            });
            
            selectedTagsContainer.appendChild(tagPill);
        }
        
        function selectTag(tagName) {
            addTag(tagName);
            document.getElementById('tagSelector').classList.add('hidden');
        }
        
        function renderTaskList() {
            const taskListElement = document.getElementById('taskList');
            const emptyStateElement = document.getElementById('emptyState');
            const taskCountElement = document.getElementById('taskCount');
            const dailyTotalElement = document.getElementById('dailyTotal');
            
            // Filter tasks for the current day
            const currentDateStr = currentDate.toISOString().split('T')[0];
            const dailyTasks = tasks.filter(task => {
                const taskDate = new Date(task.date);
                return taskDate.toISOString().split('T')[0] === currentDateStr;
            }).sort((a, b) => b.timestamp - a.timestamp);
            
            // Calculate daily total
            const dailyTotal = dailyTasks.reduce((sum, task) => sum + task.value, 0);
            dailyTotalElement.textContent = formatCurrency(dailyTotal);
            dailyTotalElement.className = dailyTotal >= 0 ? 
                'ml-2 text-lg font-bold text-green-600' : 
                'ml-2 text-lg font-bold text-red-600';
            
            // Update task count
            taskCountElement.textContent = dailyTasks.length;
            
            // Show/hide empty state
            if (dailyTasks.length === 0) {
                taskListElement.innerHTML = '';
                emptyStateElement.classList.remove('hidden');
            } else {
                emptyStateElement.classList.add('hidden');
                
                // Render tasks
                taskListElement.innerHTML = '';
                dailyTasks.forEach(task => {
                    const taskElement = document.createElement('div');
                    taskElement.className = 'bg-gray-50 p-4 rounded-lg border-l-4 task-animation';
                    taskElement.style.borderLeftColor = task.tags[0] && tags[task.tags[0]] ? 
                        tags[task.tags[0]].color : '#CBD5E0';
                    
                    const tagsHtml = task.tags.map(tag => `
                        <span class="tag-pill ml-2 text-xs" style="background-color: ${tags[tag] ? tags[tag].color + '33' : '#CBD5E033'}; color: ${tags[tag] ? tags[tag].color : '#718096'};">
                            ${tag}
                        </span>
                    `).join('');
                    
                    const hasNote = task.note && task.note.trim() !== '';
                    
                    taskElement.innerHTML = `
                        <div class="flex justify-between items-start">
                            <div>
                                <div class="flex items-start">
                                    <h3 class="font-medium text-gray-800">${task.title}</h3>
                                    ${tagsHtml}
                                </div>
                                <div class="mt-1 text-sm text-gray-500">
                                    ${formatTime(new Date(task.timestamp))}
                                </div>
                                ${hasNote ? `
                                    <div class="mt-2 note-container">
                                        <p class="text-sm text-gray-600 bg-gray-100 p-2 rounded">${task.note}</p>
                                    </div>
                                ` : ''}
                            </div>
                            <div class="flex items-center">
                                <span class="text-lg font-semibold ${task.value >= 0 ? 'text-green-600' : 'text-red-600'}">
                                    ${formatCurrency(task.value)}
                                </span>
                                <button class="ml-4 text-gray-400 hover:text-red-500 transition-colors duration-200" data-task-id="${task.id}">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                        </div>
                    `;
                    
                    taskListElement.appendChild(taskElement);
                });
                
                // Add event listeners to delete buttons
                taskListElement.querySelectorAll('button[data-task-id]').forEach(button => {
                    button.addEventListener('click', function() {
                        const taskId = parseInt(this.getAttribute('data-task-id'));
                        deleteTask(taskId);
                    });
                });
            }
        }
        
        function updateTagLevels(filter = 'all') {
            const tagLevelsElement = document.getElementById('tagLevels');
            tagLevelsElement.innerHTML = '';
            
            // Sort tags based on filter
            let sortedTags = Object.keys(tags);
            
            switch (filter) {
                case 'level':
                    sortedTags.sort((a, b) => tags[b].level - tags[a].level);
                    break;
                case 'xp':
                    sortedTags.sort((a, b) => tags[b].xp - tags[a].xp);
                    break;
                case 'tasks':
                    sortedTags.sort((a, b) => tags[b].taskCount - tags[a].taskCount);
                    break;
                default:
                    // Default sort by level then by XP
                    sortedTags.sort((a, b) => {
                        if (tags[b].level !== tags[a].level) {
                            return tags[b].level - tags[a].level;
                        }
                        return tags[b].xp - tags[a].xp;
                    });
            }
            
            if (sortedTags.length === 0) {
                tagLevelsElement.innerHTML = `
                    <div class="col-span-full text-center py-6 text-gray-500">
                        <i class="fas fa-tags text-gray-300 text-3xl mb-2"></i>
                        <p>You haven't created any tags yet. Add a task with tags to get started!</p>
                    </div>
                `;
                return;
            }
            
            sortedTags.forEach(tagName => {
                const tag = tags[tagName];
                const progress = calculateXPProgress(tag.xp);
                
                const tagElement = document.createElement('div');
                tagElement.className = 'bg-gray-50 p-4 rounded-lg border';
                
                tagElement.innerHTML = `
                    <div class="flex justify-between items-center">
                        <span class="tag-pill" style="background-color: ${tag.color}33; color: ${tag.color};">
                            ${tagName}
                        </span>
                        <span class="text-indigo-700 font-bold tooltip">
                            Level ${tag.level}
                            <span class="tooltiptext">
                                Total XP: ${Math.round(tag.xp)}<br>
                                ${tag.taskCount || 0} tasks
                            </span>
                        </span>
                    </div>
                    <div class="mt-3">
                        <div class="flex justify-between text-xs text-gray-500 mb-1">
                            <span>XP: ${Math.round(progress.currentXP)}/${progress.requiredXP}</span>
                            <span>${Math.round(progress.percentage)}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress.percentage}%; background-color: ${tag.color};"></div>
                        </div>
                    </div>
                    <div class="mt-2 text-xs flex justify-between text-gray-500">
                        <span>${tag.taskCount || 0} tasks</span>
                        <span>${tag.level > 0 ? 'Next level: ' + (tag.level + 1) : 'First level'}</span>
                    </div>
                `;
                
                tagLevelsElement.appendChild(tagElement);
            });
        }
        
        function updateCharts() {
            // Destroy existing charts if they exist
            if (dailyIncomeChart) dailyIncomeChart.destroy();
            if (tagDistributionChart) tagDistributionChart.destroy();
            if (xpProgressionChart) xpProgressionChart.destroy();
            
            createDailyIncomeChart();
            createTagDistributionChart();
            createXPProgressionChart();
        }
        
        function createDailyIncomeChart() {
            // Get last 7 days data
            const dates = [];
            const incomes = [];
            
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                date.setHours(0, 0, 0, 0);
                
                const dateStr = date.toISOString().split('T')[0];
                const dateDisplay = formatDate(date, 'short');
                
                const dailyTotal = tasks.filter(task => {
                    const taskDate = new Date(task.date);
                    return taskDate.toISOString().split('T')[0] === dateStr;
                }).reduce((sum, task) => sum + task.value, 0);
                
                dates.push(dateDisplay);
                incomes.push(dailyTotal);
            }
            
            const ctx = document.getElementById('dailyIncomeChart').getContext('2d');
            
            dailyIncomeChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: dates,
                    datasets: [{
                        label: 'Income (USD)',
                        data: incomes,
                        backgroundColor: incomes.map(value => value >= 0 ? 'rgba(74, 222, 128, 0.7)' : 'rgba(252, 165, 165, 0.7)'),
                        borderColor: incomes.map(value => value >= 0 ? 'rgb(34, 197, 94)' : 'rgb(244, 63, 94)'),
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatCurrency(value, false);
                                }
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return formatCurrency(context.raw);
                                }
                            }
                        },
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }
        
        function createTagDistributionChart() {
            // Calculate absolute value distribution by tag
            const tagValues = {};
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const sevenDaysAgo = new Date(today);
            sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 6);
            
            // Filter tasks from the last 7 days
            const recentTasks = tasks.filter(task => {
                const taskDate = new Date(task.date);
                return taskDate >= sevenDaysAgo && taskDate <= today;
            });
            
            // Calculate values by tag
            recentTasks.forEach(task => {
                task.tags.forEach(tag => {
                    if (!tagValues[tag]) {
                        tagValues[tag] = 0;
                    }
                    tagValues[tag] += Math.abs(task.value);
                });
            });
            
            // Prepare chart data
            const chartLabels = Object.keys(tagValues);
            const chartData = chartLabels.map(tag => tagValues[tag]);
            const chartColors = chartLabels.map(tag => tags[tag] ? tags[tag].color : getRandomColor());
            
            const ctx = document.getElementById('tagDistributionChart').getContext('2d');
            
            if (chartLabels.length === 0) {
                // No data, show empty state
                ctx.font = '14px Arial';
                ctx.fillStyle = '#9CA3AF';
                ctx.textAlign = 'center';
                ctx.fillText('No data for the last 7 days', ctx.canvas.width / 2, ctx.canvas.height / 2);
                return;
            }
            
            tagDistributionChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: chartLabels,
                    datasets: [{
                        data: chartData,
                        backgroundColor: chartColors.map(color => color + 'CC'),
                        borderColor: chartColors,
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total) * 100);
                                    return `${label}: ${formatCurrency(value)} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        function createXPProgressionChart() {
            // Get data for top 5 tags by XP
            const topTags = Object.keys(tags)
                .sort((a, b) => tags[b].xp - tags[a].xp)
                .slice(0, 5);
            
            const datasets = [];
            
            // Create datasets for each top tag
            topTags.forEach(tagName => {
                const tag = tags[tagName];
                
                // Get XP history or create dummy data if no history
                const history = tag.history || [];
                
                // Create cumulative XP data points
                const dataPoints = [];
                let cumulativeXP = tag.xp;
                
                // Go backwards from most recent history
                for (let i = history.length - 1; i >= 0; i--) {
                    const entry = history[i];
                    dataPoints.unshift({
                        x: new Date(entry.date).getTime(),
                        y: cumulativeXP
                    });
                    cumulativeXP -= entry.xp;
                }
                
                // If we have data points, add a starting point
                if (dataPoints.length > 0) {
                    const firstDate = new Date(dataPoints[0].x);
                    firstDate.setDate(firstDate.getDate() - 1);
                    
                    dataPoints.unshift({
                        x: firstDate.getTime(),
                        y: cumulativeXP > 0 ? cumulativeXP : 0
                    });
                } else {
                    // If no history, create minimal dummy data
                    const today = new Date();
                    const yesterday = new Date(today);
                    yesterday.setDate(yesterday.getDate() - 1);
                    
                    dataPoints.push({
                        x: yesterday.getTime(),
                        y: 0
                    });
                    
                    dataPoints.push({
                        x: today.getTime(),
                        y: tag.xp
                    });
                }
                
                // Add the dataset
                datasets.push({
                    label: tagName,
                    data: dataPoints,
                    borderColor: tag.color,
                    backgroundColor: tag.color + '20',
                    tension: 0.2,
                    fill: true
                });
            });
            
            // Create the chart
            const ctx = document.getElementById('xpProgressionChart').getContext('2d');
            
            if (topTags.length === 0) {
                // No data, show empty state
                ctx.font = '14px Arial';
                ctx.fillStyle = '#9CA3AF';
                ctx.textAlign = 'center';
                ctx.fillText('No XP data available', ctx.canvas.width / 2, ctx.canvas.height / 2);
                return;
            }
            
            xpProgressionChart = new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: datasets
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                unit: 'day',
                                displayFormats: {
                                    day: 'dd/MM'
                                }
                            },
                            title: {
                                display: true,
                                text: 'Date'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Accumulated XP'
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${Math.round(context.raw.y)} XP`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        function updateDashboard() {
            // Calculate totals
            const totalIncome = tasks.filter(task => task.value > 0).reduce((sum, task) => sum + task.value, 0);
            const totalExpense = Math.abs(tasks.filter(task => task.value < 0).reduce((sum, task) => sum + task.value, 0));
            const netBalance = totalIncome - totalExpense;
            
            // Update summary values
            document.getElementById('totalIncome').textContent = formatCurrency(totalIncome);
            document.getElementById('totalExpense').textContent = formatCurrency(totalExpense);
            document.getElementById('netBalance').textContent = formatCurrency(netBalance);
            
            // Update streak info
            document.getElementById('currentStreak').textContent = `${stats.streakDays} days`;
            document.getElementById('bestStreak').textContent = `${stats.bestStreak} days`;
        }
        
        function renderChallenges() {
            const challengesContainer = document.getElementById('challengesContainer');
            challengesContainer.innerHTML = '';
            
            challenges.forEach(challenge => {
                const isCompleted = challenge.condition();
                
                // Mark as completed in achievements if newly completed
                if (isCompleted && !achievements[challenge.id]) {
                    achievements[challenge.id] = {
                        completedAt: new Date().toISOString(),
                        displayed: false
                    };
                    saveData();
                }
                
                const challengeElement = document.createElement('div');
                challengeElement.className = `bg-gray-50 p-4 rounded-lg border ${isCompleted ? 'border-green-300' : 'border-gray-200'}`;
                
                challengeElement.innerHTML = `
                    <div class="flex items-center mb-2">
                        <div class="w-8 h-8 rounded-full flex items-center justify-center mr-3" 
                             style="background-color: ${challenge.color}33; color: ${challenge.color};">
                            <i class="${challenge.icon}"></i>
                        </div>
                        <h3 class="font-bold text-gray-800">${challenge.name}</h3>
                        ${isCompleted ? '<span class="ml-2 text-green-600"><i class="fas fa-check-circle"></i></span>' : ''}
                    </div>
                    <p class="text-sm text-gray-600">${challenge.description}</p>
                    ${isCompleted ? 
                        `<div class="mt-2 text-xs text-green-600">
                            Completed ${formatRelativeTime(new Date(achievements[challenge.id].completedAt))}
                        </div>` : 
                        '<div class="mt-3 w-full bg-gray-200 h-1.5 rounded-full"><div class="bg-gray-400 h-full rounded-full" style="width: 0%"></div></div>'}
                `;
                
                challengesContainer.appendChild(challengeElement);
            });
        }
        
        function renderAchievements() {
            const achievementContainer = document.getElementById('achievementContainer');
            achievementContainer.innerHTML = '';
            
            // Get completed achievements
            const completedAchievements = challenges
                .filter(challenge => challenge.condition())
                .slice(0, 3); // Show only top 3
            
            if (completedAchievements.length === 0) {
                const emptyState = document.createElement('div');
                emptyState.className = 'text-gray-500 text-sm text-center w-full';
                emptyState.textContent = 'Complete challenges to unlock badges';
                achievementContainer.appendChild(emptyState);
                return;
            }
            
            completedAchievements.forEach(achievement => {
                const badge = document.createElement('div');
                badge.className = 'badge text-center p-2';
                
                badge.innerHTML = `
                    <div class="w-10 h-10 rounded-full flex items-center justify-center mx-auto mb-1" 
                         style="background-color: ${achievement.color}33; color: ${achievement.color};">
                        <i class="${achievement.icon} badge-icon"></i>
                    </div>
                    <div class="text-xs font-medium" style="color: ${achievement.color};">
                        ${achievement.name}
                    </div>
                `;
                
                achievementContainer.appendChild(badge);
            });
        }
        
        function updateStreak() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            // Initialize lastActiveDate if not set
            if (!stats.lastActiveDate) {
                stats.lastActiveDate = today.toISOString();
                stats.streakDays = 1;
                stats.bestStreak = 1;
                saveData();
                return;
            }
            
            const lastActive = new Date(stats.lastActiveDate);
            const dayDifference = Math.floor((today - lastActive) / (24 * 60 * 60 * 1000));
            
            if (dayDifference === 1) {
                // Sequential day - increment streak
                stats.streakDays += 1;
                stats.bestStreak = Math.max(stats.bestStreak, stats.streakDays);
                stats.lastActiveDate = today.toISOString();
            } else if (dayDifference > 1) {
                // Streak broken
                stats.streakDays = 1;
                stats.lastActiveDate = today.toISOString();
            }
            // If dayDifference is 0, it's the same day, no need to update
            
            saveData();
        }
        
        function navigateDate(days) {
            currentDate.setDate(currentDate.getDate() + days);
            setCurrentDateDisplay();
            renderTaskList();
        }
        
        function setCurrentDateDisplay() {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            const isToday = currentDate.getTime() === today.getTime();
            const isYesterday = currentDate.getTime() === today.getTime() - (24 * 60 * 60 * 1000);
            const isTomorrow = currentDate.getTime() === today.getTime() + (24 * 60 * 60 * 1000);
            
            let displayText;
            if (isToday) {
                displayText = "Today";
            } else if (isYesterday) {
                displayText = "Yesterday";
            } else if (isTomorrow) {
                displayText = "Tomorrow";
            } else {
                displayText = formatDate(currentDate);
            }
            
            document.getElementById('currentDateDisplay').textContent = displayText;
        }
        
        function saveData() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
            localStorage.setItem('tags', JSON.stringify(tags));
            localStorage.setItem('achievements', JSON.stringify(achievements));
            localStorage.setItem('stats', JSON.stringify(stats));
        }
        
        function showNotification(message, type = 'info') {
            const notificationContainer = document.getElementById('notificationContainer');
            
            const notification = document.createElement('div');
            notification.className = 'px-4 py-3 rounded-lg shadow-lg max-w-md transition-opacity duration-300';
            
            // Set styles based on notification type
            let icon, bgColor, textColor;
            
            switch (type) {
                case 'success':
                    icon = '<i class="fas fa-check-circle mr-2"></i>';
                    bgColor = 'bg-green-100';
                    textColor = 'text-green-800';
                    break;
                case 'error':
                    icon = '<i class="fas fa-exclamation-circle mr-2"></i>';
                    bgColor = 'bg-red-100';
                    textColor = 'text-red-800';
                    break;
                default:
                    icon = '<i class="fas fa-info-circle mr-2"></i>';
                    bgColor = 'bg-blue-100';
                    textColor = 'text-blue-800';
            }
            
            notification.classList.add(bgColor, textColor);
            notification.innerHTML = `${icon}${message}`;
            
            notificationContainer.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 3000);
        }
        
        // Utility functions
        function formatCurrency(value, withSymbol = true) {
            const formatter = new Intl.NumberFormat('en-US', {
                style: withSymbol ? 'currency' : 'decimal',
                currency: 'USD',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
            
            return formatter.format(value);
        }
        
        function formatDate(date, format = 'full') {
            const day = date.getDate();
            const month = date.getMonth() + 1;
            const year = date.getFullYear();
            
            if (format === 'short') {
                return `${day}/${month}`;
            }
            
            const weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const weekday = weekdays[date.getDay()];
            
            return `${weekday} ${day}/${month}/${year}`;
        }
        
        function formatTime(date) {
            const hours = date.getHours().toString().padStart(2, '0');
            const minutes = date.getMinutes().toString().padStart(2, '0');
            
            return `${hours}:${minutes}`;
        }
        
        function formatRelativeTime(date) {
            const now = new Date();
            const diffMs = now - date;
            const diffSec = Math.floor(diffMs / 1000);
            const diffMin = Math.floor(diffSec / 60);
            const diffHour = Math.floor(diffMin / 60);
            const diffDay = Math.floor(diffHour / 24);
            
            if (diffDay > 0) {
                return diffDay === 1 ? 'yesterday' : `${diffDay} days ago`;
            }
            
            if (diffHour > 0) {
                return `about ${diffHour} hours ago`;
            }
            
            if (diffMin > 0) {
                return `about ${diffMin} minutes ago`;
            }
            
            return 'just now';
        }
        
        function getRandomColor() {
            const colors = [
                '#f87171', // red
                '#fb923c', // orange
                '#fbbf24', // amber
                '#a3e635', // lime
                '#34d399', // emerald
                '#2dd4bf', // teal
                '#38bdf8', // sky
                '#818cf8', // indigo
                '#a78bfa', // violet
                '#f472b6', // pink
            ];
            
            return colors[Math.floor(Math.random() * colors.length)];
        }
    </script>
</body>
</html>
